<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Timesheet Report</title>
    <style>
        .main-container {
            padding: 0px 10px;
        }

        .main-container .header {
            text-align: center;
        }

        .timesheet-report {
            width: 100%;
            border-collapse: collapse;
            margin-top: 0px;
            scrollbar-width: thin;
            border: 1px solid #EAEAEA;
            background-color: #FFFFFF;
        }

        .timesheet-report th,
        .timesheet-report td {
            padding: 15px 8px;
            font-size: 16px;
            text-align: left;
            border-bottom: 1px solid #EAEAEA;
        }

        .timesheet-report th {
            background-color: #343A40;
            color: #FFFFFF;
        }

        .clock-entry {
            padding: 5px 10px;
            background-color: #f7f7f7;
            margin-bottom: 5px;
            border: 1px solid #ddd;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .clock-entry:hover {
            background-color: #e7f1ff;
            border-color: #9c9c9c;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        /* .clock-entry .time,
        .clock-entry .clockout,
        .clock-entry .total-timing {
            font-size: 14px;
            font-weight: 500;
            color: #333;
            margin-bottom: 8px;
        }

        .clock-entry .time {
            font-weight: 600;
            color: #2c3e50;
        }

        .clock-entry .clockout {
            font-weight: 600;
            color: #2980b9;
        }

        .clock-entry .total-timing {
            font-weight: 500;
            color: #16a085;
        }

        .leave-entry {
            background-color: #f2f8f2;
            padding: 10px;
            border-radius: 5px;
            font-size: 14px;
        }

        .leave-reason {
            color: #e74c3c;
            font-weight: bold;
        }

        .timesheet-report td {
            position: relative;
            padding: 8px;
        }

        .timesheet-report td::after {
            content: "";
            position: absolute;
            right: 0;
            top: 20%;
            bottom: 20%;
            width: 1px;
            background-color: #ccc;
        }

        .timesheet-report td:last-child::after {
            display: none;
        }

        .filter-container {
            display: flex;
        }

        .selection-wrapper {
            display: flex;
            flex-direction: column;
        }

        @media (min-width: 992px) and (max-width: 1400px) {
            .timesheet-report {
                overflow-y: auto;
            }

            .timesheet-report td {
                padding: 16px;
            }

            .employeecontract-title {
                gap: 5px;
            }

            .company-dropdown-menu {
                left: -15px;
            }
        }

        @media (max-width: 767px) {
            .dropdown-menu {
                left: -45px;
                padding: 8px;
            }

            .timesheet-report th,
            .timesheet-report td {
                padding: 10px;
                font-size: 12px;
            }
        }

        @media (min-width: 600px) and (max-width: 991px) {
            .timesheet-report td {
                padding: 14px;
            }
        }

        @media (max-width: 500px) {
            .dropdown-menu {
                white-space: nowrap;
                padding: 10px;
                font-size: 12px;
            }

            .dropdown-menu button {
                padding: 5px;
            }

            .timesheet-report th,
            .timesheet-report td {
                white-space: nowrap;
                padding: 12px;
                font-size: 12px;
            }

            .timesheet-report {
                display: block;
                overflow-x: auto;
                white-space: nowrap;
            }
        } */
    </style>
</head>
<body>
    <div class="main-container">
        <h1 class="header">Timesheet Report</h1>
        <p>Name: <%= data.userName %></p>
        <p>Email: <%= data.userEmail %></p>
        <p>Contact Number: <%= data.userContactNumber %></p>
        <p>Job Title: <%= data.userJobTitle %></p>
        <p>Role: <%= data.userRole %></p>
        <p>Time-Duration: <%= data.startDate %> to <%= data.endDate %></p>
        <% weeklySummary.forEach((week, index) => { %>
            <li>Week <%= index + 1 %> (<%= week.weekRange %>) Total Hours: <%= week.totalHours %> || Overtime: <%= week.overTime %></li>
            <!-- <p>Week <%= index + 1 %> Overtime: <%= week.overTime %></p> -->
        <% }); %>
        <table class="timesheet-report">
            <tr>
                <th>Date</th>
                <th>Clock Timing</th>
                <th>Total Hours</th>
                <th>Overtime</th>
                <th>Status</th>
                <th>Leave Type</th>
                <!-- <th>Holiday Occasion</th> -->
            </tr>
            <% reportData.forEach(entry => { 
                %>
                    <tr>
                        <td class="clock-entry"><%= moment(entry.date).format('DD-MM-YYYY') %></td>
                        <td>
                            <% 
                                if (entry.clockinTime && entry.clockoutTime) { 
                                    let clockinTimes = entry.clockinTime.split('||').map(time => time.trim()); 
                                    let clockoutTimes = entry.clockoutTime.split('||').map(time => time.trim());
                                    let hasValidData = clockinTimes.some(time => time && time !== "-") || clockoutTimes.some(time => time && time !== "-");
                                    if (hasValidData) {
                                        for (let i = 0; i < clockinTimes.length; i++) { 
                                            let clockin = clockinTimes[i] && clockinTimes[i] !== "-" ? clockinTimes[i] : "-";
                                            let clockout = clockoutTimes[i] && clockoutTimes[i] !== "-" ? clockoutTimes[i] : "-";
                                            %>
                                                <p class="clock-entry"><%= clockin %> || <%= clockout %></p>
                                            <% 
                                        }
                                    } else { 
                                        %>
                                            <p class="clock-entry">-</p>
                                        <% 
                                    } 
                                } else { 
                                    %>
                                        <p class="clock-entry">-</p>
                                    <% 
                                } 
                            %>
                        </td>
                        <td class="clock-entry"><%= entry.totalHours ? entry.totalHours : '-' %></td>
                        <td class="clock-entry"><%= entry.overTime ? entry.overTime : '-' %></td>
                        <td class="clock-entry"><%= entry.status %></td>
                        <td class="leave-entry"><%= entry.leaveType ? entry.leaveType : '-' %></td>
                        <!-- <td class="clock-entry"><%= entry.holidayOccasion ? entry.holidayOccasion : '-' %></td> -->
                    </tr>
                <% 
            }); %>
        </table>
    </div>
</body>
</html>